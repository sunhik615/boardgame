<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë³´ë“œê²Œì„ ë°ì´í„° ê´€ë¦¬ì</title>
    <style>
        :root {
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --bg-color: #f8f9fa;
            --text-color: #2d3436;
            --white: #ffffff;
            --danger: #ff7675;
            --success: #00b894;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: var(--white);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 30px;
        }

        .alert {
            background: #e1f5fe;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            color: #0277bd;
            border-left: 5px solid #0277bd;
        }

        .toolbar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            gap: 10px;
            flex-wrap: wrap;
        }

        input[type="text"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 14px;
        }

        .search-bar {
            flex: 1;
            min-width: 200px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            opacity: 0.9;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-secondary {
            background: #dfe6e9;
            color: #636e72;
        }

        .game-list {
            max-height: 500px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 8px;
        }

        .game-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background 0.2s;
        }

        .game-item:hover {
            background-color: #f1f2f6;
        }

        .game-icon {
            font-size: 24px;
            margin-right: 15px;
            width: 40px;
            text-align: center;
        }

        .game-info {
            flex: 1;
        }

        .game-title {
            font-weight: bold;
            font-size: 16px;
        }

        .game-meta {
            font-size: 12px;
            color: #636e72;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-close {
            background: none;
            color: #aaa;
            font-size: 28px;
            border: none;
            cursor: pointer;
            padding: 0;
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
        }

        .form-row>div {
            flex: 1;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 14px;
            color: #2d3436;
        }

        .helper-text {
            font-size: 12px;
            color: #888;
            margin-top: -5px;
            margin-bottom: 10px;
        }

        .save-area {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px dashed #ddd;
            text-align: center;
        }
    </style>
</head>

<body>

    <div class="container">
        <h1>ğŸ² ë³´ë“œê²Œì„ ë°ì´í„° ê´€ë¦¬ì (v2.0)</h1>

        <div class="alert">
            <strong>ì‚¬ìš© ë°©ë²•:</strong><br>
            1. ì•„ë˜ ëª©ë¡ì—ì„œ ìˆ˜ì •í•  ê²Œì„ì„ í´ë¦­í•˜ê±°ë‚˜ <strong>'+ ìƒˆ ê²Œì„ ì¶”ê°€'</strong> ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.<br>
            2. ì°½ì´ ëœ¨ë©´ ë‚´ìš©ì„ ìˆ˜ì •í•˜ê³  'ì„ì‹œ ì €ì¥'ì„ ëˆ„ë¥´ì„¸ìš”.<br>
            3. ëª¨ë“  ìˆ˜ì •ì´ ëë‚˜ë©´ ë§¨ ì•„ë˜ <strong style="color:var(--success)">'ğŸ’¾ ë³€ê²½ì‚¬í•­ íŒŒì¼ë¡œ ì €ì¥'</strong> ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ìš´ë¡œë“œí•˜ê±°ë‚˜,<br>
            4. <strong style="color:#6c5ce7">'ğŸ“‹ ì½”ë“œ ë³µì‚¬'</strong> ë²„íŠ¼ì„ ëˆŒëŸ¬ ë³µì‚¬í•œ ë’¤ <code>games-data.js</code> íŒŒì¼ì— ì§ì ‘ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.
        </div>

        <div class="toolbar">
            <input type="text" id="searchInput" class="search-bar" placeholder="ê²Œì„ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰...">
            <button class="btn-primary" onclick="openModal()">+ ìƒˆ ê²Œì„ ì¶”ê°€</button>
        </div>

        <div class="game-list" id="gameList">
            <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ê²Œì„ ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>

        <div class="save-area">
            <p style="margin-bottom: 10px; color: #636e72;">ìˆ˜ì •ì„ ëª¨ë‘ ë§ˆì³¤ìœ¼ë©´ ì•„ë˜ ë²„íŠ¼ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”.</p>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button class="btn-success" onclick="exportData()" style="padding: 15px; font-size: 18px;">
                    ğŸ’¾ ë³€ê²½ì‚¬í•­ íŒŒì¼ë¡œ ì €ì¥ (ë‹¤ìš´ë¡œë“œ)
                </button>
                <button class="btn-primary" onclick="copyToClipboard()"
                    style="padding: 15px; font-size: 18px; background-color: #6c5ce7;">
                    ğŸ“‹ ì½”ë“œ ë³µì‚¬ (ì¶”ì²œ)
                </button>
            </div>
        </div>
    </div>

    <!-- í¸ì§‘ ëª¨ë‹¬ ì°½ -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">ê²Œì„ ì •ë³´ ìˆ˜ì •</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>

            <form id="gameForm">
                <input type="hidden" id="editIndex"> <!-- ë°°ì—´ ì¸ë±ìŠ¤ ì €ì¥ìš© -->

                <label>ê²Œì„ ì œëª© <span style="color:red">*</span></label>
                <input type="text" id="title" required placeholder="ì˜ˆ: ìŠ¤í”Œë Œë”">

                <div class="form-row">
                    <div>
                        <label>ID (ì˜ë¬¸) <span style="color:red">*</span></label>
                        <input type="text" id="id" required placeholder="ì˜ˆ: splendor">
                        <p class="helper-text">ê³ ìœ í•œ ì˜ì–´ ID (ì†Œë¬¸ì, í•˜ì´í”ˆ ê¶Œì¥)</p>
                    </div>
                </div>

                <div class="form-row">
                    <div>
                        <label>ì•„ì´ì½˜ (ì´ëª¨ì§€)</label>
                        <input type="text" id="icon" placeholder="ì˜ˆ: ğŸ’">
                    </div>
                    <div>
                        <label>ì¥ë¥´</label>
                        <input type="text" id="genre" placeholder="ì˜ˆ: ì „ëµ, íŒŒí‹°">
                    </div>
                </div>

                <div class="form-row">
                    <div>
                        <label>ìµœì†Œ ì¸ì›</label>
                        <input type="number" id="minPlayers" required min="1" value="2">
                    </div>
                    <div>
                        <label>ìµœëŒ€ ì¸ì›</label>
                        <input type="number" id="maxPlayers" required min="1" value="4">
                    </div>
                </div>

                <div class="form-row" style="background: #fff9c4; padding: 10px; border-radius: 8px;">
                    <div style="flex: 2;">
                        <label style="color: #f39c12;">â˜… ì¶”ì²œ ì¸ì› (ë² ìŠ¤íŠ¸)</label>
                        <input type="number" id="bestPlayers" placeholder="ì„ íƒì‚¬í•­ (ì˜ˆ: 4)">
                        <p class="helper-text">ë¹„ì–´ë‘ë©´ í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>

                <div class="form-row">
                    <div>
                        <label>í”Œë ˆì´ ì‹œê°„</label>
                        <input type="text" id="playTime" placeholder="ì˜ˆ: 30ë¶„">
                    </div>
                    <div>
                        <label>ë‚œì´ë„ (1.0 ~ 5.0)</label>
                        <input type="number" step="0.01" id="difficulty" placeholder="ì˜ˆ: 2.5">
                    </div>
                </div>

                <label>ë©”ì»¤ë‹ˆì¦˜ (ì½¤ë§ˆë¡œ êµ¬ë¶„)</label>
                <input type="text" id="mechanism" placeholder="ì˜ˆ: ì…‹ ì»¬ë ‰ì…˜, ë“œë˜í”„íŠ¸">

                <label>ì„¤ëª…</label>
                <textarea id="description" rows="3" placeholder="ê²Œì„ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…ì„ ì ì–´ì£¼ì„¸ìš”."></textarea>

                <div style="background: #f1f2f6; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                    <label>ğŸ–¼ï¸ ì´ë¯¸ì§€ ì„¤ì •</label>

                    <label style="font-size: 13px; margin-top: 10px;">1. ëŒ€í‘œ ì´ë¯¸ì§€ (ì¹´ë“œ/ë°°ê²½ìš©)</label>
                    <input type="text" id="mainImage" placeholder="ì˜ˆ: splendor.jpg">

                    <label style="font-size: 13px; margin-top: 10px;">2. ì¶”ê°€ ìƒì„¸ ì´ë¯¸ì§€ (ìƒì„¸í˜ì´ì§€ ê°¤ëŸ¬ë¦¬ìš©)</label>
                    <textarea id="detailImages" rows="2"
                        placeholder="ì˜ˆ: splendor_play.jpg, splendor_components.jpg (ì‰¼í‘œë¡œ êµ¬ë¶„)"></textarea>
                    <p class="helper-text">'assets/images/games/' í´ë”ì— ìˆëŠ” íŒŒì¼ëª…ì„ ì…ë ¥í•˜ì„¸ìš”.</p>
                </div>

                <label>í™•ì¥íŒ© ì •ë³´ (ì„ íƒì‚¬í•­)</label>
                <input type="text" id="expansion" placeholder="ë³´ìœ  ì¤‘ì¸ í™•ì¥íŒ©ì´ ìˆë‹¤ë©´ ì…ë ¥í•˜ì„¸ìš”.">

                <div
                    style="margin-top: 20px; display: flex; justify-content: space-between; padding-top: 15px; border-top: 1px solid #eee;">
                    <button type="button" class="btn-danger" id="deleteBtn" onclick="deleteGame()">ì‚­ì œí•˜ê¸°</button>
                    <div style="display: flex; gap: 10px;">
                        <button type="button" class="btn-secondary" onclick="closeModal()">ì·¨ì†Œ</button>
                        <button type="button" class="btn-primary" onclick="saveGame()">ì„ì‹œ ì €ì¥</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- ê¸°ì¡´ ë°ì´í„° íŒŒì¼ ë¡œë“œ (ê°™ì€ í´ë”ì— ìˆì–´ì•¼ í•¨) -->
    <script src="games-data.js"></script>

    <script>
        // games ë³€ìˆ˜ëŠ” games-data.jsì—ì„œ ë¡œë“œë¨
        // ë§Œì•½ ë¡œë“œ ì‹¤íŒ¨ ì‹œ ë¹ˆ ë°°ì—´ë¡œ ì´ˆê¸°í™”
        if (typeof games === 'undefined') {
            alert('ê²½ê³ : games-data.js íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê°™ì€ í´ë”ì— ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.');
            var games = [];
        }

        let currentGameList = JSON.parse(JSON.stringify(games)); // ê¹Šì€ ë³µì‚¬ë¡œ ì›ë³¸ ë³´í˜¸

        const gameListEl = document.getElementById('gameList');
        const searchInput = document.getElementById('searchInput');
        const editModal = document.getElementById('editModal');
        const gameForm = document.getElementById('gameForm');

        // ì´ˆê¸° ëª©ë¡ ë Œë”ë§
        renderList();

        // ê²€ìƒ‰ ê¸°ëŠ¥ ì—°ê²°
        searchInput.addEventListener('input', (e) => {
            const keyword = e.target.value.toLowerCase();
            renderList(keyword);
        });

        function renderList(keyword = '') {
            gameListEl.innerHTML = '';

            if (currentGameList.length === 0) {
                gameListEl.innerHTML = '<div style="padding:20px; text-align:center;">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            currentGameList.forEach((game, index) => {
                // ê²€ìƒ‰ í•„í„°ë§
                if (keyword && !game.title.toLowerCase().includes(keyword) && !game.id.toLowerCase().includes(keyword)) {
                    return;
                }

                const item = document.createElement('div');
                item.className = 'game-item';
                item.onclick = () => openModal(index);

                let bestBadge = '';
                if (game.bestPlayers) {
                    bestBadge = `<span style="background:#fff9c4; color:#f39c12; padding:2px 5px; border-radius:4px; font-size:11px; margin-left:5px;">â˜…${game.bestPlayers}ì¸ ì¶”ì²œ</span>`;
                }

                item.innerHTML = `
                <div class="game-icon">${game.icon || 'ğŸ²'}</div>
                <div class="game-info">
                    <div class="game-title">${game.title} ${bestBadge}</div>
                    <div class="game-meta">
                        ${game.minPlayers}~${game.maxPlayers}ì¸ | ${game.playTime} | ë‚œì´ë„ ${game.difficulty}
                    </div>
                </div>
            `;
                gameListEl.appendChild(item);
            });
        }

        // ëª¨ë‹¬ ì—´ê¸° (ìƒˆë¡œ ë§Œë“¤ê¸° ë˜ëŠ” ìˆ˜ì •)
        window.openModal = function (index = null) {
            editModal.classList.add('active');
            document.getElementById('editIndex').value = index !== null ? index : '';

            const deleteBtn = document.getElementById('deleteBtn');
            const modalTitle = document.getElementById('modalTitle');
            const form = document.getElementById('gameForm');

            // í¼ ì´ˆê¸°í™” (ì´ì „ì— ì…ë ¥ëœ ê°’ ì œê±°)
            form.reset();

            if (index !== null) {
                // ìˆ˜ì • ëª¨ë“œ
                deleteBtn.style.display = 'block';
                modalTitle.innerText = 'ê²Œì„ ì •ë³´ ìˆ˜ì •';

                const game = currentGameList[index];
                document.getElementById('title').value = game.title || '';
                document.getElementById('id').value = game.id || '';
                document.getElementById('icon').value = game.icon || '';
                document.getElementById('genre').value = game.genre || '';
                document.getElementById('mechanism').value = game.mechanism || '';
                document.getElementById('minPlayers').value = game.minPlayers || '';
                document.getElementById('maxPlayers').value = game.maxPlayers || '';
                document.getElementById('bestPlayers').value = game.bestPlayers || '';
                document.getElementById('playTime').value = game.playTime || '';
                document.getElementById('difficulty').value = game.difficulty || '';
                document.getElementById('description').value = game.description || '';
                document.getElementById('expansion').value = game.expansion || '';

                // ì´ë¯¸ì§€ ì²˜ë¦¬ ë¶„ë¦¬
                if (game.images && Array.isArray(game.images) && game.images.length > 0) {
                    // ì²« ë²ˆì§¸ ì´ë¯¸ì§€ëŠ” ëŒ€í‘œ ì´ë¯¸ì§€ë¡œ
                    document.getElementById('mainImage').value = game.images[0];

                    // ë‚˜ë¨¸ì§€ëŠ” ì¶”ê°€ ì´ë¯¸ì§€ë¡œ
                    if (game.images.length > 1) {
                        const others = game.images.slice(1);
                        document.getElementById('detailImages').value = others.join(', ');
                    } else {
                        document.getElementById('detailImages').value = '';
                    }
                } else if (game.image) {
                    // í•˜ìœ„ í˜¸í™˜ì„±: ë‹¨ì¼ image ë¬¸ìì—´ì¸ ê²½ìš°
                    document.getElementById('mainImage').value = game.image;
                    document.getElementById('detailImages').value = '';
                } else {
                    document.getElementById('mainImage').value = '';
                    document.getElementById('detailImages').value = '';
                }

            } else {
                // ìƒˆ ê²Œì„ ì¶”ê°€ ëª¨ë“œ
                deleteBtn.style.display = 'none';
                modalTitle.innerText = 'ìƒˆ ê²Œì„ ì¶”ê°€';
                // ê¸°ë³¸ê°’ ì„¤ì •
                document.getElementById('minPlayers').value = 2;
                document.getElementById('maxPlayers').value = 4;
            }
        };

        window.closeModal = function () {
            editModal.classList.remove('active');
        };

        window.saveGame = function () {
            const indexVal = document.getElementById('editIndex').value;
            const index = indexVal === '' ? -1 : parseInt(indexVal);
            const isNew = index === -1;

            // í•„ìˆ˜ ì…ë ¥ ì²´í¬
            const title = document.getElementById('title').value.trim();
            const id = document.getElementById('id').value.trim();

            if (!title || !id) {
                alert('ì œëª©ê³¼ IDëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.');
                return;
            }

            // í¼ ë°ì´í„° ìˆ˜ì§‘
            const formData = {
                id: id,
                title: title,
                genre: document.getElementById('genre').value.trim(),
                mechanism: document.getElementById('mechanism').value.trim(),
                minPlayers: parseInt(document.getElementById('minPlayers').value) || 1,
                maxPlayers: parseInt(document.getElementById('maxPlayers').value) || 1,
                playTime: document.getElementById('playTime').value.trim(),
                difficulty: parseFloat(document.getElementById('difficulty').value) || 1,
                // imageClass: id, // ì‚­ì œë¨: ê¸°ì¡´ imageClassë¥¼ ë®ì–´ì“°ì§€ ì•ŠìŒ
                icon: document.getElementById('icon').value.trim(),
                description: document.getElementById('description').value.trim(),
            };

            // ë² ìŠ¤íŠ¸ ì¸ì› (ê°’ì´ ìˆì„ ë•Œë§Œ ì €ì¥)
            const bestPlayersInput = document.getElementById('bestPlayers').value;
            if (bestPlayersInput) {
                formData.bestPlayers = parseInt(bestPlayersInput);
            }

            // í™•ì¥íŒ© (ê°’ì´ ìˆì„ ë•Œë§Œ ì €ì¥)
            const expansionInput = document.getElementById('expansion').value.trim();
            if (expansionInput) {
                formData.expansion = expansionInput;
            }

            // ì´ë¯¸ì§€ ë°°ì—´ ì²˜ë¦¬ (Main + Details í•©ì¹˜ê¸°)
            const mainImg = document.getElementById('mainImage').value.trim();
            const detailImgsStr = document.getElementById('detailImages').value.trim();

            const newImages = [];
            if (mainImg) {
                newImages.push(mainImg);
            }
            if (detailImgsStr) {
                const details = detailImgsStr.split(',').map(s => s.trim()).filter(s => s !== '');
                newImages.push(...details);
            }

            if (newImages.length > 0) {
                formData.images = newImages;
                // êµ¬ë²„ì „ í˜¸í™˜ì„±ì„ ìœ„í•´ image í•„ë“œê°€ ìˆì—ˆë‹¤ë©´ ì œê±°í•˜ê±°ë‚˜ ì—…ë°ì´íŠ¸ (ì—¬ê¸°ì„  imagesë¡œ í†µì¼ ê¶Œì¥)
            }


            if (isNew) {
                // ìƒˆ ê²Œì„ì€ ê·¸ëƒ¥ ì¶”ê°€
                // ìƒˆ ê²Œì„ì¼ ë•ŒëŠ” imageClass ê¸°ë³¸ê°’ì„ idë¡œ ì„¤ì •í•´ì£¼ëŠ” ê²ƒì´ ì•ˆì „í•  ìˆ˜ ìˆìŒ (ì—†ëŠ” ê²½ìš°)
                formData.imageClass = id;
                currentGameList.push(formData);
            } else {
                // ê¸°ì¡´ ë°ì´í„° ìœ ì§€í•˜ë©´ì„œ ë³‘í•© (í•µì‹¬ ìˆ˜ì • ì‚¬í•­!)
                // ê¸°ì¡´ ê²Œì„ ë°ì´í„° + ìƒˆ í¼ ë°ì´í„° (í¼ ë°ì´í„°ê°€ ë®ì–´ì”€)
                // ì´ë ‡ê²Œ í•˜ë©´ í¼ì— ì—†ëŠ” hidden í•„ë“œ(ì˜ˆ: ì»¤ìŠ¤í…€ imageClass)ëŠ” ë³´ì¡´ë¨
                const originalGame = currentGameList[index];
                currentGameList[index] = { ...originalGame, ...formData };
            }

            closeModal();
            renderList(searchInput.value);
            // alert('ëª©ë¡ì´ ê°±ì‹ ë˜ì—ˆìŠµë‹ˆë‹¤. ê¼­ íŒŒì¼ë¡œ ì €ì¥ì„ í•´ì£¼ì„¸ìš”!');
        };

        window.deleteGame = function () {
            const index = document.getElementById('editIndex').value;
            if (index !== '' && confirm('ì •ë§ ì´ ê²Œì„ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤)')) {
                currentGameList.splice(index, 1);
                closeModal();
                renderList(searchInput.value);
            }
        };

        window.exportData = function () {
            const jsonStr = JSON.stringify(currentGameList, null, 4);
            const fileContent = `const games = ${jsonStr};`;

            const blob = new Blob([fileContent], { type: "text/javascript;charset=utf-8" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "games-data.js";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            alert('íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤. ê¸°ì¡´ games-data.js íŒŒì¼ì— ë®ì–´ì”Œì›Œì£¼ì„¸ìš”.');
        };

        window.copyToClipboard = function () {
            const jsonStr = JSON.stringify(currentGameList, null, 4);
            const fileContent = `const games = ${jsonStr};`;

            navigator.clipboard.writeText(fileContent).then(() => {
                alert('ì½”ë“œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nì´ì œ games-data.js íŒŒì¼ì„ ì—´ê³ \nëª¨ë“  ë‚´ìš©ì„ ì§€ìš´ ë’¤ ë¶™ì—¬ë„£ê¸°(Ctrl+V) í•˜ì„¸ìš”.');
            }).catch(err => {
                console.error('Failed to copy: ', err);
                alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë³´ì•ˆ ì„¤ì • ë•Œë¬¸ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì„ ì´ìš©í•´ì£¼ì„¸ìš”.');
            });
        }

        // ëª¨ë‹¬ ë°– í´ë¦­ì‹œ ë‹«ê¸°
        window.onclick = function (event) {
            if (event.target == editModal) {
                closeModal();
            }
        }

        // Check for pending updates from detail pages
        window.addEventListener('load', () => {
            const pendingUpdates = JSON.parse(localStorage.getItem('boardgame_pending_updates') || '[]');

            if (pendingUpdates.length > 0) {
                let appliedCount = 0;

                pendingUpdates.forEach(update => {
                    const gameIndex = currentGameList.findIndex(g => g.id === update.id);
                    if (gameIndex !== -1) {
                        currentGameList[gameIndex].bestPlayers = update.bestPlayers;
                        appliedCount++;
                    }
                });

                if (appliedCount > 0) {
                    renderList(searchInput.value);
                    alert(`ğŸ“¢ ìƒì„¸ í˜ì´ì§€ì—ì„œ ìˆ˜ì •ëœ ë°ì´í„° ${appliedCount}ê±´ì´ ë°˜ì˜ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nê¼­ [ğŸ’¾ ì €ì¥] ë˜ëŠ” [ğŸ“‹ ì½”ë“œ ë³µì‚¬]ë¥¼ í•´ë³´ì„¸ìš”.`);

                    // Clear pending updates after applying
                    localStorage.removeItem('boardgame_pending_updates');
                }
            }
        });
    </script>

</body>

</html>